/* esm.sh - cytoscape-expand-collapse@4.1.1 */
var te=Object.create;var Y=Object.defineProperty;var ne=Object.getOwnPropertyDescriptor;var oe=Object.getOwnPropertyNames;var ae=Object.getPrototypeOf,ie=Object.prototype.hasOwnProperty;var de=(I,S)=>()=>(S||I((S={exports:{}}).exports,S),S.exports);var se=(I,S,P,m)=>{if(S&&typeof S=="object"||typeof S=="function")for(let v of oe(S))!ie.call(I,v)&&v!==P&&Y(I,v,{get:()=>S[v],enumerable:!(m=ne(S,v))||m.enumerable});return I};var le=(I,S,P)=>(P=I!=null?te(ae(I)):{},se(S||!I||!I.__esModule?Y(P,"default",{value:I,enumerable:!0}):P,I));var q=de((W,H)=>{(function(I,S){typeof W=="object"&&typeof H=="object"?H.exports=S():typeof define=="function"&&define.amd?define([],S):typeof W=="object"?W.cytoscapeExpandCollapse=S():I.cytoscapeExpandCollapse=S()})(W,(()=>{return I={78:P=>{var m={equalBoundingBoxes:function(v,C){return v.x1==C.x1&&v.x2==C.x2&&v.y1==C.y1&&v.y2==C.y2},getUnion:function(v,C){var f={x1:Math.min(v.x1,C.x1),x2:Math.max(v.x2,C.x2),y1:Math.min(v.y1,C.y1),y2:Math.max(v.y2,C.y2)};return f.w=f.x2-f.x1,f.h=f.y2-f.y1,f}};P.exports=m},540:(P,m,v)=>{var C=v(630),f=v(438);P.exports=function(N,e,t){var o,i,s=N;let c=function(){var n=e.scratch("_cyExpandCollapse");return n&&n.cueUtilities};var u={init:function(){var n=document.createElement("canvas");n.classList.add("expand-collapse-canvas");var r=e.container(),a=n.getContext("2d");r.append(n),o=v(537)(e);var p=function(w){var E=w.getBoundingClientRect();return{top:E.top+document.documentElement.scrollTop,left:E.left+document.documentElement.scrollLeft}},d=C((function(){n.height=e.container().offsetHeight,n.width=e.container().offsetWidth,n.style.position="absolute",n.style.top=0,n.style.left=0,n.style.zIndex=_().zIndex,setTimeout((function(){var w=p(n),E=p(r);n.style.top=-(w.top-E.top),n.style.left=-(w.left-E.left),e&&l()}),0)}),250);function y(){d()}y();var h={};function _(){return e.scratch("_cyExpandCollapse").options}function l(){var w=e.width(),E=e.height();a.clearRect(0,0,w,E),i=null}function g(w,E,T,M,R){var D=new Image(M,R);D.src=w,D.onload=()=>{a.drawImage(D,E,T,M,R)}}e.on("resize",h.eCyResize=function(){y()}),e.on("expandcollapse.clearvisualcue",(function(){i&&l()}));var x,b=null,z=null;e.on("mousedown",h.eMouseDown=function(w){b=w.renderedPosition||w.cyRenderedPosition}),e.on("mouseup",h.eMouseUp=function(w){z=w.renderedPosition||w.cyRenderedPosition}),e.on("remove","node",h.eRemove=function(w){w.target==i&&l()}),e.on("select unselect",h.eSelect=function(){i&&l();var w=e.nodes(":selected");if(w.length===1){var E=w[0];(E.isParent()||E.hasClass("cy-expand-collapse-collapsed-node"))&&(function(T){var M=T.children(),R=T.data("collapsedChildren");if(M!=null&&M!=null&&M.length>0||R){var D,F=T.hasClass("cy-expand-collapse-collapsed-node"),B=_().expandCollapseCueSize,O=_().expandCollapseCueLineSize;if(_().expandCollapseCuePosition==="top-left"){var G=e.zoom()<1?B/(2*e.zoom()):B/2,A=parseFloat(T.css("border-width"));D={x:T.position("x")-T.width()/2-parseFloat(T.css("padding-left"))+A+G+1,y:T.position("y")-T.height()/2-parseFloat(T.css("padding-top"))+A+G+1}}else{var j=_().expandCollapseCuePosition;D=typeof j=="function"?j.call(this,T):j}var L=o.convertToRenderedPosition(D),V=((B=Math.max(B,B*e.zoom()))-(O=Math.max(O,O*e.zoom())))/2,$=L.x,X=L.y,k=$-B/2,U=X-B/2,K=B;if(F&&_().expandCueImage)g(_().expandCueImage,k,U,B,B);else if(!F&&_().collapseCueImage)g(_().collapseCueImage,k,U,B,B);else{var Q=a.fillStyle,Z=a.lineWidth,ee=a.strokeStyle;a.fillStyle="black",a.strokeStyle="black",a.ellipse($,X,B/2,B/2,0,0,2*Math.PI),a.fill(),a.beginPath(),a.strokeStyle="white",a.lineWidth=Math.max(2.6,2.6*e.zoom()),a.moveTo(k+V,U+B/2),a.lineTo(k+O+V,U+B/2),F&&(a.moveTo(k+B/2,U+V),a.lineTo(k+B/2,U+O+V)),a.closePath(),a.stroke(),a.strokeStyle=ee,a.fillStyle=Q,a.lineWidth=Z}T._private.data.expandcollapseRenderedStartX=k,T._private.data.expandcollapseRenderedStartY=U,T._private.data.expandcollapseRenderedCueSize=K,i=T}})(E)}}),e.on("tap",h.eTap=function(w){var E=i;if(E){var T=E.data("expandcollapseRenderedStartX"),M=E.data("expandcollapseRenderedStartY"),R=E.data("expandcollapseRenderedCueSize"),D=T+R,F=M+R,B=w.renderedPosition||w.cyRenderedPosition,O=B.x,G=B.y,A=_(),j=(A.expandCollapseCueSensitivity-1)/2;Math.abs(b.x-z.x)<5&&Math.abs(b.y-z.y)<5&&O>=T-R*j&&O<=D+R*j&&G>=M-R*j&&G<=F+R*j&&(A.undoable&&!x&&(x=e.undoRedo({defaultActions:!1})),t.isCollapsible(E)?(l(),A.undoable?x.do("collapse",{nodes:E,options:A}):t.collapse(E,A)):t.isExpandable(E)&&(l(),A.undoable?x.do("expand",{nodes:E,options:A}):t.expand(E,A)),E.selectable()&&(E.unselectify(),e.scratch("_cyExpandCollapse").selectableChanged=!0))}}),e.on("afterUndo afterRedo",h.eUndoRedo=h.eSelect),e.on("position","node",h.ePosition=f(h.eSelect,100,l)),e.on("pan zoom",h.ePosition),h.hasEventFields=!0,(function(w){var E=e.scratch("_cyExpandCollapse");E==null&&(E={}),E.cueUtilities=w,e.scratch("_cyExpandCollapse",E)})(h)},unbind:function(){var n=c();n.hasEventFields?(e.trigger("expandcollapse.clearvisualcue"),e.off("mousedown","node",n.eMouseDown).off("mouseup","node",n.eMouseUp).off("remove","node",n.eRemove).off("tap","node",n.eTap).off("add","node",n.eAdd).off("position","node",n.ePosition).off("pan zoom",n.ePosition).off("select unselect",n.eSelect).off("free","node",n.eFree).off("resize",n.eCyResize).off("afterUndo afterRedo",n.eUndoRedo)):console.log("events to unbind does not exist")},rebind:function(){var n=c();n.hasEventFields?e.on("mousedown","node",n.eMouseDown).on("mouseup","node",n.eMouseUp).on("remove","node",n.eRemove).on("tap","node",n.eTap).on("add","node",n.eAdd).on("position","node",n.ePosition).on("pan zoom",n.ePosition).on("select unselect",n.eSelect).on("free","node",n.eFree).on("resize",n.eCyResize).on("afterUndo afterRedo",n.eUndoRedo):console.log("events to rebind does not exist")}};if(u[s])return u[s].apply(e.container(),Array.prototype.slice.call(arguments,1));if(typeof s=="object"||!s)return u.init.apply(e.container(),arguments);throw new Error("No such function `"+s+"` for cytoscape.js-expand-collapse")}},630:P=>{var m,v,C=(m=Math.max,v=Date.now||function(){return new Date().getTime()},function(f,N,e){var t,o,i,s,c,u,n,r,a,p=0,d=!1,y=!0;if(typeof f!="function")throw new TypeError("Expected a function");if(N=N<0?0:+N||0,e===!0){var h=!0;y=!1}else a=typeof(r=e),!r||a!="object"&&a!="function"||(h=!!e.leading,d="maxWait"in e&&m(+e.maxWait||0,N),y="trailing"in e?!!e.trailing:y);function _(b,z){z&&clearTimeout(z),o=u=n=void 0,b&&(p=v(),i=f.apply(c,t),u||o||(t=c=void 0))}function l(){var b=N-(v()-s);b<=0||b>N?_(n,o):u=setTimeout(l,b)}function g(){_(y,u)}function x(){if(t=arguments,s=v(),c=this,n=y&&(u||!h),d===!1)var b=h&&!u;else{o||h||(p=s);var z=d-(s-p),w=z<=0||z>d;w?(o&&(o=clearTimeout(o)),p=s,i=f.apply(c,t)):o||(o=setTimeout(g,z))}return w&&u?u=clearTimeout(u):u||N===d||(u=setTimeout(l,N)),b&&(w=!0,i=f.apply(c,t)),!w||u||o||(t=c=void 0),i}return x.cancel=function(){u&&clearTimeout(u),o&&clearTimeout(o),p=0,o=u=n=void 0},x});P.exports=C},438:P=>{P.exports=function(m,v,C){let f,N=!0;return function(){let e=this,t=arguments;clearTimeout(f),f=setTimeout((function(){f=null,m.apply(e,t),N=!0}),v),N&&(C.apply(e,t),N=!1)}}},537:P=>{P.exports=function(m){return{moveNodes:function(v,C,f){var N=f?C:this.getTopMostNodes(C),e=N.not(":parent");e.positions((function(i,s){return{x:e[s].position("x")+v.x,y:e[s].position("y")+v.y}}));for(var t=0;t<N.length;t++){var o=N[t].children();this.moveNodes(v,o,!0)}},getTopMostNodes:function(v){for(var C={},f=0;f<v.length;f++)C[v[f].id()]=!0;var N=v.filter((function(e,t){typeof e=="number"&&(e=t);for(var o=e.parent()[0];o!=null;){if(C[o.id()])return!1;o=o.parent()[0]}return!0}));return N},rearrange:function(v){if(typeof v=="function")v();else if(v!=null){var C=m.layout(v);C&&C.run&&C.run()}},convertToRenderedPosition:function(v){var C=m.pan(),f=m.zoom();return{x:v.x*f+C.x,y:v.y*f+C.y}}}}},272:(P,m,v)=>{var C=v(78);P.exports=function(f){var N=v(537)(f);return{animatedlyMovingNodeCount:0,expandNodeBaseFunction:function(e,t,o){if(e._private.data.collapsedChildren){var i={x:e._private.position.x-e._private.data["position-before-collapse"].x,y:e._private.position.y-e._private.data["position-before-collapse"].y};e.removeData("infoLabel"),e.removeClass("cy-expand-collapse-collapsed-node"),e.trigger("expandcollapse.beforeexpand");var s=e._private.data.collapsedChildren;s.restore();for(var c=f.scratch("_cyExpandCollapse").parentData,u=0;u<s.length;u++)delete c[s[u].id()];f.scratch("_cyExpandCollapse").parentData=c,this.repairEdges(e),e._private.data.collapsedChildren=null,N.moveNodes(i,e.children()),e.removeData("position-before-collapse"),e.trigger("position"),e.trigger("expandcollapse.afterexpand"),t&&this.endOperation(o,e)}},simpleCollapseGivenNodes:function(e){e.data("collapse",!0);for(var t=N.getTopMostNodes(e),o=0;o<t.length;o++){var i=t[o];this.collapseBottomUp(i)}return e},simpleExpandGivenNodes:function(e,t){e.data("expand",!0);for(var o=N.getTopMostNodes(e),i=0;i<o.length;i++){var s=o[i];this.expandTopDown(s,t)}return e},simpleExpandAllNodes:function(e,t){var o;e===void 0&&(e=f.nodes()),o=N.getTopMostNodes(e);for(var i=[],s=0;s<o.length;s++){var c=o[s];this.expandAllTopDown(c,i,t)}return i},endOperation:function(e,t){f.ready((function(){setTimeout((function(){N.rearrange(e),f.scratch("_cyExpandCollapse").selectableChanged&&(t.selectify(),f.scratch("_cyExpandCollapse").selectableChanged=!1)}),0)}))},expandAllNodes:function(e,t){var o=this.simpleExpandAllNodes(e,t.fisheye);return this.endOperation(t.layoutBy,e),o},expandAllTopDown:function(e,t,o){e._private.data.collapsedChildren!=null&&(t.push(e),this.expandNode(e,o));for(var i=e.children(),s=0;s<i.length;s++){var c=i[s];this.expandAllTopDown(c,t,o)}},expandGivenNodes:function(e,t){if(e.length===1){var o=e[0];o._private.data.collapsedChildren!=null&&this.expandNode(o,t.fisheye,!0,t.animate,t.layoutBy,t.animationDuration)}else this.simpleExpandGivenNodes(e,t.fisheye),this.endOperation(t.layoutBy,e);return e},collapseGivenNodes:function(e,t){return f.startBatch(),this.simpleCollapseGivenNodes(e),f.endBatch(),e.trigger("position"),this.endOperation(t.layoutBy,e),f.style().update(),e},collapseBottomUp:function(e){for(var t=e.children(),o=0;o<t.length;o++){var i=t[o];this.collapseBottomUp(i)}e.data("collapse")&&e.children().length>0&&(this.collapseNode(e),e.removeData("collapse"))},expandTopDown:function(e,t){e.data("expand")&&e._private.data.collapsedChildren!=null&&(this.expandNode(e,t),e.removeData("expand"));for(var o=e.children(),i=0;i<o.length;i++){var s=o[i];this.expandTopDown(s)}},convertToModelPosition:function(e){var t=f.pan(),o=f.zoom();return{x:(e.x-t.x)/o,y:(e.y-t.y)/o}},expandNode:function(e,t,o,i,s,c){var u=this,n=function(l,g,x,b,z,w){g&&(l._private.data["width-before-fisheye"]=l._private.data["size-before-collapse"].w,l._private.data["height-before-fisheye"]=l._private.data["size-before-collapse"].h,u.fishEyeViewExpandGivenNode(l,x,l,b,z,w)),x&&g&&b||u.expandNodeBaseFunction(l,x,z)};if(e._private.data.collapsedChildren!=null){this.storeWidthHeight(e);var r=!1;if(t&&o){var a=this.convertToModelPosition({x:0,y:0}),p=this.convertToModelPosition({x:f.width(),y:f.height()}),d={x1:a.x,x2:p.x,y1:a.y,y2:p.y},y={x1:e._private.position.x-e._private.data["size-before-collapse"].w/2-80,x2:e._private.position.x+e._private.data["size-before-collapse"].w/2+80,y1:e._private.position.y-e._private.data["size-before-collapse"].h/2-80,y2:e._private.position.y+e._private.data["size-before-collapse"].h/2+80},h=C.getUnion(y,d);if(!C.equalBoundingBoxes(h,d)){var _=f.getFitViewport(h,10);u=this,r=i,i?f.animate({pan:_.pan,zoom:_.zoom,complete:function(){n(e,t,o,i,s,c)}},{duration:c||1e3}):(f.zoom(_.zoom),f.pan(_.pan))}}return r||n(e,t,o,i,s,c),e}},collapseNode:function(e){if(e._private.data.collapsedChildren==null){e.data("position-before-collapse",{x:e.position().x,y:e.position().y}),e.data("size-before-collapse",{w:e.outerWidth(),h:e.outerHeight()});var t=e.children();return t.unselect(),t.connectedEdges().unselect(),e.trigger("expandcollapse.beforecollapse"),this.barrowEdgesOfcollapsedChildren(e),this.removeChildren(e,e),e.addClass("cy-expand-collapse-collapsed-node"),e.trigger("expandcollapse.aftercollapse"),e.position(e.data("position-before-collapse")),e}},storeWidthHeight:function(e){e!=null&&(e._private.data["x-before-fisheye"]=this.xPositionInParent(e),e._private.data["y-before-fisheye"]=this.yPositionInParent(e),e._private.data["width-before-fisheye"]=e.outerWidth(),e._private.data["height-before-fisheye"]=e.outerHeight(),e.parent()[0]!=null&&this.storeWidthHeight(e.parent()[0]))},fishEyeViewExpandGivenNode:function(e,t,o,i,s,c){var u=this.getSiblings(e),n=this.xPositionInParent(e),r=this.yPositionInParent(e),a=Math.abs((e._private.data["width-before-fisheye"]-e.outerWidth())/2),p=Math.abs((e._private.data["width-before-fisheye"]-e.outerWidth())/2),d=Math.abs((e._private.data["height-before-fisheye"]-e.outerHeight())/2),y=Math.abs((e._private.data["height-before-fisheye"]-e.outerHeight())/2),h=Math.abs(e._private.data["x-before-fisheye"]-n),_=Math.abs(e._private.data["y-before-fisheye"]-r);e._private.data["x-before-fisheye"]>n?(a+=h,p-=h):(a-=h,p+=h),e._private.data["y-before-fisheye"]>r?(d+=_,y-=_):(d-=_,y+=_);for(var l=[],g=[],x=0;x<u.length;x++)l.push(this.xPositionInParent(u[x])),g.push(this.yPositionInParent(u[x]));for(x=0;x<u.length;x++){var b,z,w=u[x],E=l[x],T=g[x],M=(T-r)/(E-n),R=0,D=0;b=n>E?a:p,z=r>T?d:y,isFinite(M)&&(R=Math.min(b,z/Math.abs(M))),M!==0&&(D=Math.min(z,b*Math.abs(M))),n>E&&(R*=-1),r>T&&(D*=-1),this.fishEyeViewMoveNode(w,R,D,o,t,i,s,c)}return u.length==0&&e.same(o)&&this.expandNodeBaseFunction(o,t,s),e.parent()[0]!=null&&this.fishEyeViewExpandGivenNode(e.parent()[0],t,o,i,s,c),e},getSiblings:function(e){return e.parent()[0]==null?f.nodes(":visible").orphans().difference(e):e.siblings(":visible")},fishEyeViewMoveNode:function(e,t,o,i,s,c,u,n){var r=f.collection();e.isParent()&&(r=e.children(":visible"));var a=this;if(r.length==0){var p={x:e._private.position.x+t,y:e._private.position.y+o};s&&c?(this.animatedlyMovingNodeCount++,e.animate({position:p,complete:function(){a.animatedlyMovingNodeCount--,a.animatedlyMovingNodeCount>0||!i.hasClass("cy-expand-collapse-collapsed-node")||a.expandNodeBaseFunction(i,s,u)}},{duration:n||1e3})):e.position(p)}else for(var d=0;d<r.length;d++)this.fishEyeViewMoveNode(r[d],t,o,i,s,c,u,n)},xPositionInParent:function(e){var t=e.parent()[0];return t!=null?e.relativePosition("x")+t.width()/2:e.position("x")},yPositionInParent:function(e){var t=e.parent()[0];return t!=null?e.relativePosition("y")+t.height()/2:e.position("y")},removeChildren:function(e,t){for(var o=e.children(),i=0;i<o.length;i++){var s=o[i];this.removeChildren(s,t);var c=f.scratch("_cyExpandCollapse").parentData;c[s.id()]=s.parent(),f.scratch("_cyExpandCollapse").parentData=c;var u=s.remove();t._private.data.collapsedChildren==null?t._private.data.collapsedChildren=u:t._private.data.collapsedChildren=t._private.data.collapsedChildren.union(u)}},isMetaEdge:function(e){return e.hasClass("cy-expand-collapse-meta-edge")},barrowEdgesOfcollapsedChildren:function(e){var t=e.descendants(),o=t.edgesWith(f.nodes().not(t.union(e))),i={};t.each((function(a,p){typeof a=="number"&&(a=p),i[a.id()]=!0}));for(var s=0;s<o.length;s++){var c=o[s],u=c.source(),n=c.target();if(!this.isMetaEdge(c)){var r={source:u,target:n};c.addClass("cy-expand-collapse-meta-edge"),c.data("originalEnds",r)}c.move({target:i[n.id()]?e.id():n.id(),source:i[u.id()]?e.id():u.id()})}},findNewEnd:function(e){for(var t=e,o=f.scratch("_cyExpandCollapse").parentData,i=o[t.id()];!t.inside();)t=i,i=o[i.id()];return t},repairEdges:function(e){for(var t=e.connectedEdges(".cy-expand-collapse-meta-edge"),o=0;o<t.length;o++){var i=t[o],s=i.data("originalEnds"),c=i.data("source");i.data("target"),(i=c===e.id()?i.move({source:this.findNewEnd(s.source).id()}):i.move({target:this.findNewEnd(s.target).id()})).data("source")===s.source.id()&&i.data("target")===s.target.id()&&(i.removeClass("cy-expand-collapse-meta-edge"),i.removeData("originalEnds"))}},isOuterNode:function(e,t){for(var o=e;o!=null;){if(o==t)return!1;o=o.parent()[0]}return!0},getCollapsedChildrenRecursively:function(e,t){var o,i=e.data("collapsedChildren")||[];for(o=0;o<i.length;o++)i[o].data("collapsedChildren")&&(t=t.union(this.getCollapsedChildrenRecursively(i[o],t))),t=t.union(i[o]);return t},collapseGivenEdges:function(e,t){e.unselect();var o=e.connectedNodes(),i={};if(t.groupEdgesOfSameTypeOnCollapse)e.forEach((function(d){var y="unknown";if(t.edgeTypeInfo!==void 0&&(y=t.edgeTypeInfo instanceof Function?t.edgeTypeInfo.call(d):d.data()[t.edgeTypeInfo]),i.hasOwnProperty(y))i[y].edges=i[y].edges.add(d),i[y].directionType!="unidirection"||i[y].source==d.source().id()&&i[y].target==d.target().id()||(i[y].directionType="bidirection");else{var h=f.collection();h=h.add(d),i[y]={edges:h,directionType:"unidirection",source:d.source().id(),target:d.target().id()}}}));else{i.unknown={edges:e,directionType:"unidirection",source:e[0].source().id(),target:e[0].target().id()};for(var s=0;s<e.length;s++)if(i.unknown.directionType=="unidirection"&&(i.unknown.source!=e[s].source().id()||i.unknown.target!=e[s].target().id())){i.unknown.directionType="bidirection";break}}var c={edges:f.collection(),oldEdges:f.collection()},u=[];for(let d in i)if(!(i[d].edges.length<2)){e.trigger("expandcollapse.beforecollapseedge"),c.oldEdges=c.oldEdges.add(i[d].edges);var n={group:"edges",data:{}};n.data.source=i[d].source,n.data.target=i[d].target;var r=o[0].id(),a=r;o[1]&&(a=o[1].id()),n.data.id="collapsedEdge_"+r+"_"+a+"_"+d+"_"+Math.floor(Math.random()*Date.now()),n.data.collapsedEdges=f.collection(),i[d].edges.forEach((function(y){n.data.collapsedEdges=n.data.collapsedEdges.add(y)})),n.data.collapsedEdges=this.check4nestedCollapse(n.data.collapsedEdges,t);var p="edgeType";t.edgeTypeInfo!==void 0&&(p=t.edgeTypeInfo instanceof Function?p:t.edgeTypeInfo),n.data[p]=d,n.data.directionType=i[d].directionType,n.classes="cy-expand-collapse-collapsed-edge",u.push(n),f.remove(i[d].edges),e.trigger("expandcollapse.aftercollapseedge")}return c.edges=f.add(u),c},check4nestedCollapse:function(e,t){if(t.allowNestedEdgeCollapse)return e;let o=f.collection();for(let i=0;i<e.length;i++){let s=e[i],c=s.data("collapsedEdges");o=c&&c.length>0?o.add(c):o.add(s)}return o},expandEdge:function(e){e.unselect();var t={edges:f.collection(),oldEdges:f.collection()},o=e.data("collapsedEdges");return o!==void 0&&o.length>0&&(e.trigger("expandcollapse.beforeexpandedge"),t.oldEdges=t.oldEdges.add(e),f.remove(e),t.edges=f.add(o),e.trigger("expandcollapse.afterexpandedge")),t},isValidEdgesForCollapse:function(e){var t=this.getEdgesDistinctEndPoints(e);return t.length==2&&t},getEdgesDistinctEndPoints:function(e){var t=[];return e.forEach(function(o){this.containsElement(t,o.source())||t.push(o.source()),this.containsElement(t,o.target())||t.push(o.target())}.bind(this)),t},containsElement:function(e,t){for(var o=!1,i=0;i<e.length;i++)if(e[i].id()==t.id()){o=!0;break}return o}}}},497:(P,m,v)=>{var C;(function(){"use strict";var f=function(N){if(N){var e=v(699),t=v(540),o=null;N("core","expandCollapse",(function(n){var r=this,a=c(r,"options")||{layoutBy:null,fisheye:!0,animate:!0,animationDuration:1e3,ready:function(){},undoable:!0,cueEnabled:!0,expandCollapseCuePosition:"top-left",expandCollapseCueSize:12,expandCollapseCueLineSize:8,expandCueImage:void 0,collapseCueImage:void 0,expandCollapseCueSensitivity:1,edgeTypeInfo:"edgeType",groupEdgesOfSameTypeOnCollapse:!1,allowNestedEdgeCollapse:!0,zIndex:999};if(n!=="get"){a=i(a,n);var p=(function(d,y){var h={};function _(l){var g=c(d,"options");l.cueEnabled&&!g.cueEnabled?h.enableCue():!l.cueEnabled&&g.cueEnabled&&h.disableCue()}return h.setOptions=function(l){_(l),u(d,"options",l)},h.extendOptions=function(l){var g=i(c(d,"options"),l);_(g),u(d,"options",g)},h.setOption=function(l,g){var x={};x[l]=g;var b=i(c(d,"options"),x);_(b),u(d,"options",b)},h.collapse=function(l,g){var x=this.collapsibleNodes(l),b=i(c(d,"options"),g);return s(b),y.collapseGivenNodes(x,b)},h.collapseRecursively=function(l,g){var x=this.collapsibleNodes(l),b=i(c(d,"options"),g);return s(b),this.collapse(x.union(x.descendants()),b)},h.expand=function(l,g){var x=this.expandableNodes(l),b=i(c(d,"options"),g);return s(b),y.expandGivenNodes(x,b)},h.expandRecursively=function(l,g){var x=this.expandableNodes(l),b=i(c(d,"options"),g);return s(b),y.expandAllNodes(x,b)},h.collapseAll=function(l){var g=i(c(d,"options"),l);return s(g),this.collapseRecursively(this.collapsibleNodes(),g)},h.expandAll=function(l){var g=i(c(d,"options"),l);return s(g),this.expandRecursively(this.expandableNodes(),g)},h.isExpandable=function(l){return l.hasClass("cy-expand-collapse-collapsed-node")},h.isCollapsible=function(l){return!this.isExpandable(l)&&l.isParent()},h.collapsibleNodes=function(l){var g=this;return(l||d.nodes()).filter((function(x,b){return typeof x=="number"&&(x=b),g.isCollapsible(x)}))},h.expandableNodes=function(l){var g=this;return(l||d.nodes()).filter((function(x,b){return typeof x=="number"&&(x=b),g.isExpandable(x)}))},h.getCollapsedChildren=function(l){return l.data("collapsedChildren")},h.getCollapsedChildrenRecursively=function(l){var g=d.collection();return y.getCollapsedChildrenRecursively(l,g)},h.getAllCollapsedChildrenRecursively=function(){var l,g=d.collection(),x=d.nodes(".cy-expand-collapse-collapsed-node");for(l=0;l<x.length;l++)g=g.union(this.getCollapsedChildrenRecursively(x[l]));return g},h.clearVisualCue=function(l){d.trigger("expandcollapse.clearvisualcue")},h.disableCue=function(){var l=c(d,"options");l.cueEnabled&&(t("unbind",d,h),l.cueEnabled=!1)},h.enableCue=function(){var l=c(d,"options");l.cueEnabled||(t("rebind",d,h),l.cueEnabled=!0)},h.getParent=function(l){return d.getElementById(l)[0]===void 0?c(d,"parentData")[l]:d.getElementById(l).parent()},h.collapseEdges=function(l,g){var x={edges:d.collection(),oldEdges:d.collection()};if(l.length<2||!(function(z){let w=[];for(let E=0;E<z.length;E++){let T=z[E].source().id(),M=z[E].target().id(),R={};R[T]=!0,R[M]=!0,w.push(R)}for(let E=0;E<w.length;E++)for(let T=E+1;T<w.length;T++){let M=Object.keys(w[E]),R=Object.keys(w[T]),D=new Set(M.concat(R));if(D.size!=M.length||D.size!=R.length)return!1}return!0})(l))return x;var b=i(c(d,"options"),g);return y.collapseGivenEdges(l,b)},h.expandEdges=function(l){var g={edges:d.collection(),oldEdges:d.collection()};return l===void 0||l.forEach((function(x){var b=y.expandEdge(x);g.edges=g.edges.add(b.edges),g.oldEdges=g.oldEdges.add(b.oldEdges)})),g},h.collapseEdgesBetweenNodes=function(l,g){var x,b,z=i(c(d,"options"),g),w=(b=[],(x=l).slice(0,x.length-1).forEach((function(T,M){x.slice(M+1,x.length).forEach((function(R){b.push([T,R])}))})),b);w.push(...l.map((T=>[T,T])));var E={edges:d.collection(),oldEdges:d.collection()};return w.forEach(function(T){let M=T[1].id();var R=T[0].connectedEdges('[source = "'+M+'"],[target = "'+M+'"]');if(T[0].id()===M&&(R=T[0].connectedEdges('[source = "'+M+'"][target = "'+M+'"]')),R.length>=2){var D=y.collapseGivenEdges(R,z);E.oldEdges=E.oldEdges.add(D.oldEdges),E.edges=E.edges.add(D.edges)}}.bind(this)),E},h.expandEdgesBetweenNodes=function(l){var g,x,b=d.collection(),z=(x=[],(g=l).slice(0,g.length-1).forEach((function(w,E){g.slice(E+1,g.length).forEach((function(T){x.push([w,T])}))})),x);return z.push(...l.map((w=>[w,w]))),z.forEach(function(w){let E=w[1].id();var T=w[0].connectedEdges('.cy-expand-collapse-collapsed-edge[source = "'+E+'"],[target = "'+E+'"]');w[0].id()===E&&(T=w[0].connectedEdges('[source = "'+E+'"][target = "'+E+'"]')),b=b.union(T)}.bind(this)),this.expandEdges(b)},h.collapseAllEdges=function(l){return this.collapseEdgesBetweenNodes(d.edges().connectedNodes(),l)},h.expandAllEdges=function(){var l=d.edges(".cy-expand-collapse-collapsed-edge"),g={edges:d.collection(),oldEdges:d.collection()},x=this.expandEdges(l);return g.oldEdges=g.oldEdges.add(x.oldEdges),g.edges=g.edges.add(x.edges),g},h.loadJson=function(l){o.loadJson(l)},h.saveJson=function(l,g){return o.saveJson(l,g)},h})(r,v(272)(r));o=v(554)(r,p),u(r,"api",p),e(r,p),t(a,r,p),a.cueEnabled||t("unbind",r,p),a.ready&&a.ready(),u(r,"options",a),u(r,"parentData",{})}return c(r,"api")}))}function i(n,r){var a={};for(var p in n)a[p]=n[p];for(var p in r)a.hasOwnProperty(p)&&(a[p]=r[p]);return a}function s(n){var r=typeof n.animate=="function"?n.animate.call():n.animate,a=typeof n.fisheye=="function"?n.fisheye.call():n.fisheye;n.animate=r,n.fisheye=a}function c(n,r){n.scratch("_cyExpandCollapse")===void 0&&n.scratch("_cyExpandCollapse",{});var a=n.scratch("_cyExpandCollapse");return r===void 0?a:a[r]}function u(n,r,a){c(n)[r]=a}};P.exports&&(P.exports=f),(C=function(){return f}.call(m,v,m,P))===void 0||(P.exports=C),typeof cytoscape<"u"&&f(cytoscape)})()},554:P=>{P.exports=function(m,v){function C(t,o,i,s){t.sort((u=>u.group==="edges"?1:-1));let c=m.collection();for(let u=0;u<t.length;u++){let n=t[u],r=n.data;r.parent&&(s[r.id]=r.parent);let a={x:n.position.x,y:n.position.y},p=m.add(n);if(p.isNode()&&o.merge(p),r.originalEnds){let d=o.$id(r.originalEnds.source.data.id);r.originalEnds.source.data.parent&&(s[r.originalEnds.source.data.id]=r.originalEnds.source.data.parent);let y=o.$id(r.originalEnds.target.data.id);r.originalEnds.target.data.parent&&(s[r.originalEnds.target.data.id]=r.originalEnds.target.data.parent),p.data("originalEnds",{source:d,target:y})}r.collapsedChildren?(i.merge(p),C(r.collapsedChildren,o,i,s),f(p)):r.collapsedEdges&&(p.data("collapsedEdges",C(r.collapsedEdges,o,i,s)),m.remove(p.data("collapsedEdges"))),p.position(a),c.merge(p)}return c}function f(t){t.data("collapsedChildren",null),t.removeClass("cy-expand-collapse-collapsed-node"),t.data("position-before-collapse",null),t.data("size-before-collapse",null),t.data("expandcollapseRenderedStartX",null),t.data("expandcollapseRenderedStartY",null),t.data("expandcollapseRenderedCueSize",null)}function N(t){let o=[];for(let i=0;i<t.length;i++){let s=t[i],c=null;if(s.collapsedChildren||s.collapsedEdges?s.collapsedChildren?(s.collapsedChildren=N(e(s.collapsedChildren)),c=s.cy.json(),c.data.collapsedChildren=s.collapsedChildren):s.collapsedEdges&&(s.collapsedEdges=N(e(s.collapsedEdges)),c=s.cy.json(),c.data.collapsedEdges=s.collapsedEdges):c=s.cy.json(),s.originalEnds){let u=s.originalEnds.source.json(),n=s.originalEnds.target.json();u.data.collapsedChildren&&(u.data.collapsedChildren=N(e(u.data.collapsedChildren))),n.data.collapsedChildren&&(n.data.collapsedChildren=N(e(n.data.collapsedChildren))),c.data.originalEnds={source:u,target:n}}o.push(c)}return o}function e(t){let o=[];for(let i=0;i<t.length;i++)o.push({cy:t[i],collapsedEdges:t[i].data("collapsedEdges"),collapsedChildren:t[i].data("collapsedChildren"),originalEnds:t[i].data("originalEnds")});return o}return{loadJson:function(t){let o=JSON.parse(t),i={},s=m.collection(),c=m.collection(),u={};for(let n of o.nodes){i[n.data.id]={x:n.position.x,y:n.position.y},n.data.parent&&(u[n.data.id]=n.data.parent);let r=m.add(n);s.merge(r),r.data("collapsedChildren")&&(C(r.data("collapsedChildren"),s,c,u),c.merge(r),f(r))}for(let n of o.edges){let r=m.add(n);if(r.data("collapsedEdges")&&(r.data("collapsedEdges",C(n.data.collapsedEdges,s,c,u)),m.remove(r.data("collapsedEdges"))),r.data("originalEnds")){let a=n.data.originalEnds.source.data.id,p=n.data.originalEnds.target.data.id;n.data.originalEnds={source:s.filter("#"+a),target:s.filter("#"+p)}}}for(let n in u){let r=s.$id(n);r.length===1&&r.move({parent:u[n]})}v.collapse(c,{layoutBy:null,fisheye:!1,animate:!1});for(let n of o.nodes)m.$id(n.data.id).isChildless()&&m.$id(n.data.id).position(i[n.data.id]);m.fit()},saveJson:function(t,o){t||(t=m.$());let i=e(t.nodes()),s=e(t.edges());if(s.length+i.length<1)return;let c={nodes:[],edges:[]};for(let n of s){if(n.collapsedEdges&&(n.collapsedEdges=N(e(n.collapsedEdges))),n.originalEnds){let a=n.originalEnds.source.json(),p=n.originalEnds.target.json();a.data.collapsedChildren&&(a.data.collapsedChildren=N(e(a.data.collapsedChildren))),p.data.collapsedChildren&&(p.data.collapsedChildren=N(e(p.data.collapsedChildren))),n.originalEnds={source:a,target:p}}let r=n.cy.json();r.data.collapsedEdges=n.collapsedEdges,r.data.originalEnds=n.originalEnds,c.edges.push(r)}for(let n of i){n.collapsedChildren&&(n.collapsedChildren=N(e(n.collapsedChildren)));let r=n.cy.json();r.data.collapsedChildren=n.collapsedChildren,c.nodes.push(r)}let u=JSON.stringify(c);return o&&(function(n,r){let a=new Blob([n],{type:"text/plain"}),p=document.createElement("a");p.download=r,p.href=window.URL.createObjectURL(a),p.dataset.downloadurl=["text/plain",p.download,p.href].join(":"),p.click()})(u,o),u}}}},699:P=>{P.exports=function(m,v){if(m.undoRedo!=null){for(var C=m.undoRedo({},!0),f={layoutBy:null,animate:!1,fisheye:!1},N=["collapse","collapseRecursively","collapseAll","expand","expandRecursively","expandAll"],e=0;e<N.length;e++)e==2?C.action("collapseAll",o("collapseAll"),o("expandRecursively")):e==5?C.action("expandAll",o("expandAll"),o("collapseRecursively")):C.action(N[e],o(N[e]),o(N[(e+3)%6]));C.action("collapseEdges",i,u),C.action("expandEdges",u,i),C.action("collapseEdgesBetweenNodes",s,n),C.action("expandEdgesBetweenNodes",n,s),C.action("collapseAllEdges",c,r),C.action("expandAllEdges",r,c)}function t(){for(var a={},p=m.nodes(),d=0;d<p.length;d++){var y=p[d];a[y.id()]={x:y.position("x"),y:y.position("y")}}return a}function o(a){return function(p){var d,y,h,_={},l=typeof(d=p.nodes)=="string"?m.$(d):d;return p.firstTime?(_.oldData=t(),_.nodes=a.indexOf("All")>0?v[a](p.options):v[a](l,p.options)):(_.oldData=t(),_.nodes=a.indexOf("All")>0?v[a](f):v[a](m.collection(l),f),y=p.oldData,h={},m.nodes().not(":parent").positions((function(g,x){typeof g=="number"&&(g=x),h[g.id()]={x:g.position("x"),y:g.position("y")};var b=y[g.id()];return{x:b.x,y:b.y}}))),_}}function i(a){var p=a.options,d=a.edges,y={};if(y.options=p,a.firstTime){var h=v.collapseEdges(d,p);y.edges=h.edges,y.oldEdges=h.oldEdges,y.firstTime=!1}else y.oldEdges=d,y.edges=a.oldEdges,a.edges.length>0&&a.oldEdges.length>0&&(m.remove(a.edges),m.add(a.oldEdges));return y}function s(a){var p=a.options,d={};if(d.options=p,a.firstTime){var y=v.collapseEdgesBetweenNodes(a.nodes,p);d.edges=y.edges,d.oldEdges=y.oldEdges,d.firstTime=!1}else d.edges=a.oldEdges,d.oldEdges=a.edges,a.edges.length>0&&a.oldEdges.length>0&&(m.remove(a.edges),m.add(a.oldEdges));return d}function c(a){var p=a.options,d={};if(d.options=p,a.firstTime){var y=v.collapseAllEdges(p);d.edges=y.edges,d.oldEdges=y.oldEdges,d.firstTime=!1}else d.edges=a.oldEdges,d.oldEdges=a.edges,a.edges.length>0&&a.oldEdges.length>0&&(m.remove(a.edges),m.add(a.oldEdges));return d}function u(a){var p=a.options,d={};if(d.options=p,a.firstTime){var y=v.expandEdges(a.edges);d.edges=y.edges,d.oldEdges=y.oldEdges,d.firstTime=!1}else d.oldEdges=a.edges,d.edges=a.oldEdges,a.edges.length>0&&a.oldEdges.length>0&&(m.remove(a.edges),m.add(a.oldEdges));return d}function n(a){var p=a.options,d={};if(d.options=p,a.firstTime){var y=v.expandEdgesBetweenNodes(a.nodes,p);d.edges=y.edges,d.oldEdges=y.oldEdges,d.firstTime=!1}else d.edges=a.oldEdges,d.oldEdges=a.edges,a.edges.length>0&&a.oldEdges.length>0&&(m.remove(a.edges),m.add(a.oldEdges));return d}function r(a){var p=a.options,d={};if(d.options=p,a.firstTime){var y=v.expandAllEdges(p);d.edges=y.edges,d.oldEdges=y.oldEdges,d.firstTime=!1}else d.edges=a.oldEdges,d.oldEdges=a.edges,a.edges.length>0&&a.oldEdges.length>0&&(m.remove(a.edges),m.add(a.oldEdges));return d}}}},S={},(function P(m){var v=S[m];if(v!==void 0)return v.exports;var C=S[m]={exports:{}};return I[m](C,C.exports,P),C.exports})(497);var I,S}))});var J=le(q()),ce=J.default??J;export{ce as default};
//# sourceMappingURL=cytoscape-expand-collapse.bundle.mjs.map